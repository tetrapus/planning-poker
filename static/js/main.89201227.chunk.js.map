{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["uiConfig","signInFlow","callbacks","signInSuccessWithAuthResult","signInOptions","firebase","auth","GoogleAuthProvider","PROVIDER_ID","LoggedOutTemplate","style","marginTop","transform","flexGrow","margin","firebaseAuth","user","a","firestore","collection","add","owner","uid","name","displayName","activeTask","deck","created","Timestamp","now","game","doc","set","window","location","search","id","CreateGameForm","useCollection","orderBy","limit","games","onClick","createGame","docs","map","className","data","toDate","toLocaleString","average","nums","length","reduce","b","ScoreState","members","scores","scoreData","revealed","display","flexDirection","width","fontSize","isMe","fontWeight","marginRight","Math","round","Object","values","filter","score","Game","gameDoc","slice","useDocument","gameLoading","tasks","tasksLoading","useState","newTask","setNewTask","membersLoading","points","setPoints","ticket","setTicket","allScores","allScoresLoading","activeTaskId","find","task","taskIndex","findIndex","console","log","backgroundColor","color","ref","merge","placeholder","onChange","event","value","onKeyPress","e","key","currentTarget","idx","document","phabricatorGetEpic","pattern","type","checkValidity","tickets","t","fields","background","height","padding","card","disabled","phabricatorSetPoints","match","p","parseInt","ticketId","minHeight","App","useAuthState","gameId","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","initialised","initFirebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.89201227.chunk.js","sourcesContent":["import \"./App.css\";\nimport firebase from \"firebase\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { useCollection, useDocument } from \"react-firebase-hooks/firestore\";\nimport { StyledFirebaseAuth } from \"react-firebaseui\";\nimport { useState } from \"react\";\n\n// Configure FirebaseUI.\nconst uiConfig = {\n  signInFlow: \"popup\",\n  callbacks: {\n    // Avoid redirects after sign-in.\n    signInSuccessWithAuthResult: () => false,\n  },\n  signInOptions: [firebase.auth.GoogleAuthProvider.PROVIDER_ID],\n};\n\nexport function LoggedOutTemplate() {\n  return (\n    <div\n      style={{\n        marginTop: \"50vh\",\n        transform: \"translateY(-100%)\",\n        flexGrow: 1,\n        margin: \"auto\",\n      }}\n    >\n      <h1>Planning Poker</h1>\n      <StyledFirebaseAuth uiConfig={uiConfig} firebaseAuth={firebase.auth()} />\n    </div>\n  );\n}\n\nasync function createGame(user) {\n  const game = await firebase\n    .firestore()\n    .collection(\"game\")\n    .add({\n      owner: user.uid,\n      name: `${user.displayName}'s Planning Poker`,\n      activeTask: null,\n      deck: [1, 2, 3, 5, 8, 13, 21],\n      created: firebase.firestore.Timestamp.now(),\n    });\n  game.collection(\"members\").doc(user.uid).set({\n    name: user.displayName,\n  });\n  window.location.search = game.id;\n}\n\nexport function CreateGameForm({ user }) {\n  const [games] = useCollection(\n    firebase.firestore().collection(\"game\").orderBy(\"created\", \"desc\").limit(10)\n  );\n  return (\n    <div style={{ margin: \"auto\" }}>\n      <h1>Welcome, {user.displayName}!</h1>\n      <button onClick={() => createGame(user)}>Start a new game</button>\n      <h2>Join Game</h2>\n      <div>\n        {games\n          ? games.docs.map((game) => (\n              <div\n                onClick={() => (window.location.search = game.id)}\n                className=\"GameEntry\"\n              >\n                {game.data().name} (\n                {game.data().created.toDate().toLocaleString()})\n              </div>\n            ))\n          : null}\n      </div>\n    </div>\n  );\n}\n\nfunction average(nums) {\n  if (!nums.length) {\n    return 0;\n  }\n  return nums.reduce((a, b) => a + b) / nums.length;\n}\n\nfunction ScoreState({ game, user, activeTask, members, scores }) {\n  const scoreData = (scores ? scores.data() : null) || {};\n  const revealed = activeTask.data().revealed;\n  if (!members) {\n    return;\n  }\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        width: \"20vw\",\n        fontSize: \"18px\",\n      }}\n    >\n      <div>\n        {members.docs.map((doc) => {\n          const isMe = user.uid === doc.id;\n          return (\n            <div\n              style={{\n                ...(isMe ? { fontWeight: \"bold\" } : {}),\n                ...{ margin: \"8px 12px\", display: \"flex\" },\n              }}\n            >\n              <div style={{ marginRight: \"auto\" }}>{doc.data().name} </div>\n              <div>\n                {isMe && scoreData\n                  ? scoreData[user.uid]\n                  : revealed\n                  ? scoreData[doc.id]\n                  : scoreData[doc.id]\n                  ? \"✔️\"\n                  : \"\"}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n      <div>\n        {revealed ? (\n          <>\n            Average:{\" \"}\n            {Math.round(\n              average(Object.values(scoreData).filter((score) => score !== \"?\"))\n            )}\n          </>\n        ) : (\n          <>\n            {Object.values(scoreData).length}/{members.docs.length} Responses\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport function Game({ user }) {\n  const gameDoc = firebase\n    .firestore()\n    .collection(\"game\")\n    .doc(window.location.search.slice(1));\n  const [game, gameLoading] = useDocument(gameDoc);\n  const [tasks, tasksLoading] = useCollection(\n    gameDoc.collection(\"tasks\").orderBy(\"idx\")\n  );\n  const [newTask, setNewTask] = useState(\"\");\n  const [members, membersLoading] = useCollection(\n    gameDoc.collection(\"members\")\n  );\n  const [points, setPoints] = useState();\n  const [ticket, setTicket] = useState(\"\");\n  const [allScores, allScoresLoading] = useCollection(\n    gameDoc.collection(\"scores\")\n  );\n  if (gameLoading || tasksLoading || membersLoading) {\n    return null;\n  }\n  const activeTaskId = game.data().activeTask;\n  const activeTask =\n    activeTaskId && !tasksLoading\n      ? tasks.docs.find((task) => task.id === activeTaskId)\n      : null;\n  const scores = allScoresLoading\n    ? null\n    : allScores.docs.find((doc) => doc.id === activeTaskId);\n\n  const taskIndex = tasks.docs.findIndex((task) => task.id === activeTaskId);\n  console.log(ticket);\n  if (members.docs.find((doc) => doc.id === user.uid)) {\n    return (\n      <div style={{ display: \"flex\", backgroundColor: \"#f0f0f0\" }}>\n        <div style={{ width: \"20vw\" }}>\n          <h1>Tasks</h1>\n          <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n            {tasks\n              ? tasks.docs.map((doc) => (\n                  <div\n                    style={\n                      activeTaskId === doc.id\n                        ? { fontWeight: \"bold\" }\n                        : { color: \"grey\" }\n                    }\n                    onClick={() => {\n                      game.ref.set({ activeTask: doc.id }, { merge: true });\n                    }}\n                    className=\"TaskEntry\"\n                  >\n                    {doc.data().name}\n                  </div>\n                ))\n              : null}\n            <input\n              placeholder=\"+ Add Task\"\n              onChange={(event) => setNewTask(event.value)}\n              value={newTask}\n              style={{ marginTop: 16 }}\n              onKeyPress={async (e) => {\n                if (e.key === \"Enter\") {\n                  await gameDoc.collection(\"tasks\").add({\n                    name: e.currentTarget.value,\n                    revealed: false,\n                    idx: tasks.docs.length,\n                  });\n                  setNewTask(\"\");\n                }\n              }}\n            ></input>\n            {document.phabricatorGetEpic ? (\n              <input\n                placeholder=\"Ticket\"\n                value={ticket}\n                onChange={(e) => setTicket(e.currentTarget.value)}\n                pattern=\"T\\d+\"\n                type=\"text\"\n                onKeyPress={async (e) => {\n                  if (e.key === \"Enter\" && e.currentTarget.checkValidity()) {\n                    const tickets = await document.phabricatorGetEpic(ticket);\n                    let idx = tasks.docs.length;\n                    for (const t of tickets) {\n                      await gameDoc.collection(\"tasks\").add({\n                        name: `T${t.id}: ${t.fields.name}`,\n                        revealed: false,\n                        idx: idx++,\n                      });\n                    }\n                    setTicket(\"\");\n                  }\n                }}\n              ></input>\n            ) : null}\n          </div>\n        </div>\n        <div\n          style={{\n            display: \"flex\",\n            flexDirection: \"column\",\n            width: \"60vw\",\n            background: \"white\",\n            height: \"auto\",\n          }}\n        >\n          {activeTask ? (\n            <>\n              <h1 style={{ padding: \"38px\" }}>{activeTask.data().name}</h1>\n              <div style={{ margin: \"32px\" }}>\n                {[...game.data().deck, \"?\"].map((card) => {\n                  console.log({ card, data: scores?.data() });\n                  return (\n                    <button\n                      className={`Card ${\n                        scores &&\n                        scores.data() &&\n                        card === scores.data()[user.uid]\n                          ? \"SelectedCard\"\n                          : \"\"\n                      }`}\n                      onClick={() => {\n                        game.ref\n                          .collection(\"scores\")\n                          .doc(activeTaskId)\n                          .set(\n                            {\n                              [user.uid]: card,\n                            },\n                            { merge: true }\n                          );\n                      }}\n                    >\n                      {card}\n                    </button>\n                  );\n                })}\n              </div>\n              <div>\n                {activeTask.data().revealed &&\n                game.data().owner === user.uid ? (\n                  <div>\n                    <button\n                      onClick={() => {\n                        activeTask.ref.set(\n                          { revealed: false },\n                          { merge: true }\n                        );\n                      }}\n                      className=\"Secondary\"\n                    >\n                      Hide\n                    </button>\n                    <button\n                      disabled={taskIndex === tasks.docs.length - 1}\n                      onClick={() => {\n                        game.ref.set(\n                          { activeTask: tasks.docs[taskIndex + 1].id },\n                          { merge: true }\n                        );\n                      }}\n                    >\n                      Next\n                    </button>\n                  </div>\n                ) : (\n                  <div>\n                    <button\n                      disabled={taskIndex === tasks.docs.length - 1}\n                      onClick={() => {\n                        game.ref.set(\n                          { activeTask: tasks.docs[taskIndex + 1].id },\n                          { merge: true }\n                        );\n                      }}\n                      className=\"Secondary\"\n                    >\n                      Skip\n                    </button>\n                    <button\n                      onClick={() => {\n                        activeTask.ref.set({ revealed: true }, { merge: true });\n                        setPoints(\n                          scores\n                            ? Math.round(\n                                average(\n                                  Object.values(scores.data()).filter(\n                                    (score) => score !== \"?\"\n                                  )\n                                )\n                              )\n                            : 0\n                        );\n                      }}\n                    >\n                      Reveal\n                    </button>\n                  </div>\n                )}\n                {document.phabricatorSetPoints &&\n                activeTask &&\n                activeTask.data().name.match(/^T\\d+/) ? (\n                  <div style={{ marginTop: \"32px\" }}>\n                    <input\n                      placeholder=\"Points\"\n                      value={points}\n                      onChange={(e) => setPoints(e.currentTarget.value)}\n                    ></input>\n                    <button\n                      onClick={async () => {\n                        const p = parseInt(points);\n                        const ticketId = parseInt(\n                          activeTask.data().name.match(/^T(\\d+)/)[1]\n                        );\n                        await document.phabricatorSetPoints(ticketId, p);\n                        setPoints(\"\");\n                      }}\n                      className=\"InputButton\"\n                    >\n                      Set Points\n                    </button>\n                  </div>\n                ) : null}\n              </div>\n            </>\n          ) : (\n            <button\n              disabled={tasksLoading || !tasks.docs.length}\n              onClick={() =>\n                game.ref.set({ activeTask: tasks.docs[0].id }, { merge: true })\n              }\n            >\n              Start Game\n            </button>\n          )}\n        </div>\n        {activeTask ? (\n          <ScoreState\n            game={game}\n            user={user}\n            activeTask={activeTask}\n            members={membersLoading ? null : members}\n            scores={scores}\n          />\n        ) : null}\n      </div>\n    );\n  } else {\n    return (\n      <div\n        style={{\n          display: \"flex\",\n          minHeight: \"100vh\",\n        }}\n      >\n        <button\n          onClick={() =>\n            gameDoc.collection(\"members\").doc(user.uid).set({\n              name: user.displayName,\n            })\n          }\n          style={{ transform: \"translateY(-100%)\", margin: \"auto\" }}\n        >\n          Join Session\n        </button>\n      </div>\n    );\n  }\n}\n\nfunction App() {\n  const [user] = useAuthState(firebase.auth());\n  const gameId = window.location.search\n    ? window.location.search.slice(1)\n    : null;\n  return (\n    <div className=\"App\">\n      {user ? (\n        gameId ? (\n          <Game id={gameId} user={user} />\n        ) : (\n          <CreateGameForm user={user} />\n        )\n      ) : (\n        <LoggedOutTemplate />\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport firebase from \"firebase\";\n\nlet initialised = false;\n\nexport function initFirebase() {\n  if (initialised) {\n    return;\n  }\n  const firebaseConfig = {\n    apiKey: \"AIzaSyDd-g1pxYDd5wiI-8aRLKO7k0hpIA2ogO0\",\n    authDomain: \"planning-poker-27ef5.firebaseapp.com\",\n    databaseURL: \"https://planning-poker-27ef5.firebaseio.com\",\n    projectId: \"planning-poker-27ef5\",\n    storageBucket: \"planning-poker-27ef5.appspot.com\",\n    messagingSenderId: \"359210422354\",\n    appId: \"1:359210422354:web:32c9e1671ff01dddb68f8b\",\n  };\n\n  // Initialize Firebase\n  firebase.initializeApp(firebaseConfig);\n  initialised = true;\n}\n\ninitFirebase();\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}