(this["webpackJsonpplanning-poker"]=this["webpackJsonpplanning-poker"]||[]).push([[0],{33:function(e,n,t){},35:function(e,n,t){},50:function(e,n,t){"use strict";t.r(n),t.d(n,"initFirebase",(function(){return I}));var c=t(5),i=t.n(c),r=t(23),a=t.n(r),s=(t(33),t(24)),o=t(28),d=t(14),l=t.n(d),u=t(12),j=t(19),b=(t(35),t(10)),f=t(25),h=t(15),p=t(26),O=t(4),m={signInFlow:"popup",callbacks:{signInSuccessWithAuthResult:function(){return!1}},signInOptions:[b.a.auth.GoogleAuthProvider.PROVIDER_ID]};function x(){return Object(O.jsx)("div",{css:{marginTop:"50vh",transform:"translateY(-50%)"},children:Object(O.jsx)(p.StyledFirebaseAuth,{uiConfig:m,firebaseAuth:b.a.auth()})})}function g(){return(g=Object(j.a)(l.a.mark((function e(n){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.firestore().collection("game").add({owner:n.uid,name:"".concat(n.displayName,"'s Planning Poker"),activeTask:null,deck:[1,2,3,5,8,13,21],created:b.a.firestore.Timestamp.now()});case 2:(t=e.sent).collection("members").doc(n.uid).set({name:n.displayName}),window.location.search=t.id;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){var n=e.user;return Object(O.jsxs)("div",{children:[Object(O.jsxs)("h1",{children:["Welcome, ",n.displayName,"!"]}),Object(O.jsx)("button",{onClick:function(){return function(e){return g.apply(this,arguments)}(n)},children:"Start a new game"})]})}function k(e){var n,t=e.game,c=e.user,i=e.activeTask,r=e.members,a=Object(h.a)(t.ref.collection("scores").doc(i.id)),s=Object(u.a)(a,2),o=s[0],d=s[1],l=d?{}:o.data()||{},j=i.data().revealed;if(r)return Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(O.jsx)("div",{children:r.docs.map((function(e){var n=c.uid===e.id;return Object(O.jsxs)("div",{style:n?{fontWeight:"bold"}:{},children:[e.data().name," ",n&&l&&!d?l[c.uid]:j?l[e.id]:l[e.id]?"\u2714\ufe0f":""]})}))}),Object(O.jsx)("div",{children:j?Object(O.jsxs)(O.Fragment,{children:["Average:"," ",(n=Object.values(l).filter((function(e){return"?"!==e})),n.length?n.reduce((function(e,n){return e+n}))/n.length:0)]}):Object(O.jsxs)(O.Fragment,{children:[Object.values(l).length,"/",r.docs.length," Responses"]})})]})}function y(e){var n=e.user,t=b.a.firestore().collection("game").doc(window.location.search.slice(1)),i=Object(h.b)(t),r=Object(u.a)(i,2),a=r[0],d=r[1],f=Object(h.a)(t.collection("tasks").orderBy("idx")),p=Object(u.a)(f,2),m=p[0],x=p[1],g=Object(c.useState)(""),v=Object(u.a)(g,2),y=v[0],w=v[1],T=Object(h.a)(t.collection("members")),C=Object(u.a)(T,2),I=C[0],A=C[1];if(d||x||A)return null;var S=a.data().activeTask,F=S&&!x?m.docs.find((function(e){return e.id===S})):null,D=m.docs.findIndex((function(e){return e.id===S}));return I.docs.find((function(e){return e.id===n.uid}))?Object(O.jsxs)("div",{style:{display:"flex"},children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{children:"Tasks"}),Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[m?m.docs.map((function(e){return Object(O.jsx)("div",{onClick:function(){a.ref.set({activeTask:e.id},{merge:!0})},children:e.data().name})})):null,Object(O.jsx)("input",{placeholder:"+ Add Task",onChange:function(e){return w(e.value)},value:y,onKeyPress:function(){var e=Object(j.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==n.key){e.next=4;break}return e.next=3,t.collection("tasks").add({name:n.currentTarget.value,revealed:!1,idx:m.docs.length});case 3:w("");case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})]})]}),Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:F?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h1",{children:F.data().name}),Object(O.jsx)("div",{children:[].concat(Object(o.a)(a.data().deck),["?"]).map((function(e){return Object(O.jsx)("button",{onClick:function(){a.ref.collection("scores").doc(S).set(Object(s.a)({},n.uid,e),{merge:!0})},children:e})}))}),F.data().revealed?Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{onClick:function(){return F.ref.set({revealed:!1},{merge:!0})},children:"Hide"}),Object(O.jsx)("button",{disabled:D===m.docs.length-1,onClick:function(){a.ref.set({activeTask:m.docs[D+1].id},{merge:!0})},children:"Next"})]}):Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{disabled:D===m.docs.length-1,onClick:function(){a.ref.set({activeTask:m.docs[D+1].id},{merge:!0})},children:"Skip"}),Object(O.jsx)("button",{onClick:function(){return F.ref.set({revealed:!0},{merge:!0})},children:"Reveal"})," "]})]}):Object(O.jsx)("button",{disabled:x||!m.docs.length,onClick:function(){return a.ref.set({activeTask:m.docs[0].id},{merge:!0})},children:"Start Game"})}),F?Object(O.jsx)(k,{game:a,user:n,activeTask:F,members:A?null:I}):null]}):Object(O.jsx)("button",{onClick:function(){return t.collection("members").doc(n.uid).set({name:n.displayName})},children:"Join Session"})}var w=function(){var e=Object(f.a)(b.a.auth()),n=Object(u.a)(e,1)[0],t=window.location.search?window.location.search.slice(1):null;return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)("header",{className:"App-header",children:n?t?Object(O.jsx)(y,{id:t,user:n}):Object(O.jsx)(v,{user:n}):Object(O.jsx)(x,{})})})},T=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,51)).then((function(n){var t=n.getCLS,c=n.getFID,i=n.getFCP,r=n.getLCP,a=n.getTTFB;t(e),c(e),i(e),r(e),a(e)}))},C=!1;function I(){if(!C){b.a.initializeApp({apiKey:"AIzaSyDd-g1pxYDd5wiI-8aRLKO7k0hpIA2ogO0",authDomain:"planning-poker-27ef5.firebaseapp.com",databaseURL:"https://planning-poker-27ef5.firebaseio.com",projectId:"planning-poker-27ef5",storageBucket:"planning-poker-27ef5.appspot.com",messagingSenderId:"359210422354",appId:"1:359210422354:web:32c9e1671ff01dddb68f8b"}),C=!0}}I(),a.a.render(Object(O.jsx)(i.a.StrictMode,{children:Object(O.jsx)(w,{})}),document.getElementById("root")),T()}},[[50,1,2]]]);
//# sourceMappingURL=main.d18f6912.chunk.js.map